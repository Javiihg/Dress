<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        .craft-item {
            position: relative;
            overflow: hidden;
        }

        .craft-image, .craft-video {
            width: 100%;
            height: auto;
            display: block;
        }

        .craft-video {
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .craft-item:hover .craft-video {
            opacity: 1;
        }
    </style>
</head>
<body>

    <!-- Navbar -->
    <nav class="navbar">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="assets/CV_JaviHernandez.pdf" download="Javi-CV.pdf" class="cv-button">CV</a>
    </nav>

    <!-- Blob -->
    <div class="blob"></div>

    <!-- Craft Section -->
    <section id="craft">
        <h2>Work</h2>
        <p style="font-style: italic; font-size: 1.3em; opacity: 0.7;">If you hover over the images, you'll see the video.</p>

        <div class="carousel-wrapper">
            <button id="prevBtn" class="carousel-btn left">&#10094;</button>

            <div class="craft-gallery-outer">
                <div class="craft-gallery">
                    <div class="craft-item">
                        <img src="assets/botiness.png" class="craft-image" alt="Craft 1">
                        <video class="craft-video" src="assets/botinesssdaviV2 (1).mp4" muted loop></video>
                    </div>
                    <div class="craft-item">
                        <img src="assets/syyy.jpg" class="craft-image" alt="Craft 2">
                        <video class="craft-video" src="assets/2ece8d386c8945f2882b47fa92701418.mp4" muted loop></video>
                    </div>
                    <div class="craft-item">
                        <img src="assets/hierbitaaa00086400.jpg" class="craft-image" alt="Craft 3">
                        <video class="craft-video" src="assets/hierbitavideito.mp4" muted loop></video>
                    </div>
                    <div class="craft-item">
                        <img src="assets/FOTIÑO6.jpg" class="craft-image" alt="Craft 4">
                    </div>
                    <div class="craft-item">
                        <img src="assets/IMG_1043.PNG" class="craft-image" alt="Craft 4">
                        <video class="craft-video" src="assets/394a8973dc63419da5f850fda3c88eba.mp4" muted loop></video>
                    </div>
                    <div class="craft-item">
                        <img src="assets/IMG_1292.PNG" class="craft-image" alt="Craft 5">
                        <video class="craft-video" src="assets/IMG_1292.mp4" muted loop></video>
                    </div>
                    <div class="craft-item">
                        <img src="assets/IMG_2399.jpg" class="craft-image" alt="Craft 6">
                        <video class="craft-video" src="assets/9bff50a63c4846d1a5b3a9ded4d77b7f.mp4" muted loop></video>
                    </div>
                    <div class="craft-item">
                        <img src="assets/flowerpowersaaaa00086400.jpg" class="craft-image" alt="Craft 7">
                        <video class="craft-video" src="assets/c3595e1b4dd94235ac7e012fba8aa4d8.mp4" muted loop></video>
                    </div>
                    <div class="craft-item">
                        <img src="assets/IMG_2581.jpg" class="craft-image" alt="Craft 6">
                        <video class="craft-video" src="assets/paisajev2.mp4" muted loop></video>
                    </div>
                </div>
            </div>

            <button id="nextBtn" class="carousel-btn right">&#10095;</button>
        </div>
    </section>

    <!-- JavaScript -->
    <script>
    window.addEventListener('load', () => {
        const track = document.querySelector('.craft-gallery');
        let items = Array.from(track.children);
        const itemWidth = items[0].offsetWidth + 30;
        let currentIndex = 3;

        // Clonar los primeros y últimos elementos
        const clonesStart = items.slice(-3).map(item => item.cloneNode(true));
        const clonesEnd = items.slice(0, 3).map(item => item.cloneNode(true));

        clonesStart.forEach(clone => track.insertBefore(clone, track.firstChild));
        clonesEnd.forEach(clone => track.appendChild(clone));

        // Seleccionar los elementos después de clonar
        items = Array.from(track.children);

        track.style.transform = `translateX(-${currentIndex * itemWidth}px)`;

        document.getElementById('nextBtn').addEventListener('click', () => {
            currentIndex++;
            moveCarousel();
        });

        document.getElementById('prevBtn').addEventListener('click', () => {
            currentIndex--;
            moveCarousel();
        });

        function moveCarousel() {
            track.style.transition = 'transform 0.5s ease';
            track.style.transform = `translateX(-${currentIndex * itemWidth}px)`;

            track.addEventListener('transitionend', () => {
                if (currentIndex >= items.length - 3) {
                    track.style.transition = 'none';
                    currentIndex = 3;
                    track.style.transform = `translateX(-${currentIndex * itemWidth}px)`;
                }

                if (currentIndex < 3) {
                    track.style.transition = 'none';
                    currentIndex = items.length - 6;
                    track.style.transform = `translateX(-${currentIndex * itemWidth}px)`;
                }
            }, { once: true });
        }

        // ✅ Reasignar hover para todos los elementos (incluyendo clones)
        function assignHoverEvents() {
    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    const allItems = document.querySelectorAll('.craft-item');

    allItems.forEach(item => {
        const video = item.querySelector('.craft-video');

        if (isMobile) {
            item.addEventListener('click', () => {
                if (video.paused) {
                    video.currentTime = 0;
                    video.play();
                } else {
                    video.pause();
                }
            });
        } else {
            item.addEventListener('mouseenter', () => {
                video.currentTime = 0;
                video.play();
            });
            item.addEventListener('mouseleave', () => {
                video.pause();
            });
        }
    });
}


        assignHoverEvents(); // Llamamos a la función para asignar eventos a todos

    });
</script>


</body>
</html>